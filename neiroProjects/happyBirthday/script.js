document.addEventListener('DOMContentLoaded', function() {
    const generateBtn = document.getElementById('generate-btn');
    const copyBtn = document.getElementById('copy-btn');
    const nameInput = document.getElementById('name');
    const ageInput = document.getElementById('age');
    const styleSelect = document.getElementById('style');
    const addHumorCheckbox = document.getElementById('add-humor');
    const addWishesCheckbox = document.getElementById('add-wishes');
    const congratulationText = document.getElementById('congratulation-text');
    const historyList = document.getElementById('history-list');
    
    let history = [];
    
    // –ë–æ–ª—å—à–∏–µ –º–∞—Å—Å–∏–≤—ã —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–π
    const beginnings = [
        "–î–æ—Ä–æ–≥–æ–π(–∞—è)", 
        "–£–≤–∞–∂–∞–µ–º—ã–π(–∞—è)", 
        "–õ—é–±–∏–º—ã–π(–∞—è)", 
        "–°–∞–º—ã–π(–∞—è) –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–π(–∞—è)",
        "–î–æ—Ä–æ–≥–æ–π –∏–º–µ–Ω–∏–Ω–Ω–∏–∫",
        "–ú–∏–ª—ã–π(–∞—è)",
        "–ù–µ–∑–∞–±—ã–≤–∞–µ–º—ã–π(–∞—è)",
        "–û–±–æ–∂–∞–µ–º—ã–π(–∞—è)",
        "–°–µ—Ä–¥–µ—á–Ω–æ –ø–æ–∑–¥—Ä–∞–≤–ª—è—é",
        "–° –±–æ–ª—å—à–æ–π —Ä–∞–¥–æ—Å—Ç—å—é –æ–±—Ä–∞—â–∞—é—Å—å –∫ —Ç–µ–±–µ",
        "–° —Ç–µ–ø–ª–æ—Ç–æ–π –≤ —Å–µ—Ä–¥—Ü–µ",
        "–° –∏—Å–∫—Ä–µ–Ω–Ω–∏–º–∏ —á—É–≤—Å—Ç–≤–∞–º–∏",
        "–° –¥—É—à–µ–≤–Ω—ã–º —Ç—Ä–µ–ø–µ—Ç–æ–º",
        "–° —Å–∞–º—ã–º–∏ –¥–æ–±—Ä—ã–º–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è–º–∏"
    ];
    
    const middles = [
        "–æ—Ç –≤—Å–µ–≥–æ —Å–µ—Ä–¥—Ü–∞ –ø–æ–∑–¥—Ä–∞–≤–ª—è—é —Ç–µ–±—è —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è!",
        "–ø—Ä–∏–º–∏ —Å–∞–º—ã–µ —Ç–µ–ø–ª—ã–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è —Å —Ç–≤–æ–∏–º –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è!",
        "–ø–æ–∑–¥—Ä–∞–≤–ª—è—é —Å —ç—Ç–∏–º –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω—ã–º –¥–Ω–µ–º!",
        "—Ö–æ—á—É –ø–æ–∂–µ–ª–∞—Ç—å –≤—Å–µ–≥–æ –Ω–∞–∏–ª—É—á—à–µ–≥–æ –≤ —Ç–≤–æ–π –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è!",
        "–ø–æ–∑–¥—Ä–∞–≤–ª—è—é —Å —Ç–≤–æ–∏–º –æ—Å–æ–±—ã–º –¥–Ω–µ–º!",
        "–ø—Ä–∏–º–∏ –º–æ–∏ –∏—Å–∫—Ä–µ–Ω–Ω–∏–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è!",
        "–ø–æ–∑–¥—Ä–∞–≤–ª—è—é —Å —ç—Ç–æ–π –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–π –¥–∞—Ç–æ–π!",
        "—Ö–æ—á—É —Å–∫–∞–∑–∞—Ç—å —Å–∞–º—ã–µ –¥–æ–±—Ä—ã–µ —Å–ª–æ–≤–∞ –≤ —Ç–≤–æ–π –¥–µ–Ω—å!",
        "–ø—Ä–∏–º–∏ —Å–∞–º—ã–µ —Å–µ—Ä–¥–µ—á–Ω—ã–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è!",
        "–ø–æ–∑–¥—Ä–∞–≤–ª—è—é —Å –¥–Ω–µ–º —Ç–≤–æ–µ–≥–æ —Ä–æ–∂–¥–µ–Ω–∏—è!",
        "—Ä–∞–¥(–∞) –ø–æ–∑–¥—Ä–∞–≤–∏—Ç—å —Ç–µ–±—è —Å —ç—Ç–∏–º —Å–≤–µ—Ç–ª—ã–º –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–º!",
        "—Å —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ–º –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è—é—Å—å –∫ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è–º!"
    ];
    
    const wishes = [
        "–ñ–µ–ª–∞—é –∑–¥–æ—Ä–æ–≤—å—è, —Å—á–∞—Å—Ç—å—è, —Ä–∞–¥–æ—Å—Ç–∏, –±–ª–∞–≥–æ–ø–æ–ª—É—á–∏—è –∏ —É—Å–ø–µ—Ö–æ–≤ –≤–æ –≤—Å–µ—Ö –Ω–∞—á–∏–Ω–∞–Ω–∏—è—Ö!",
        "–ü—É—Å—Ç—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –ø—Ä–∏–Ω–æ—Å–∏—Ç —Ä–∞–¥–æ—Å—Ç—å, —É–ª—ã–±–∫–∏ –±–ª–∏–∑–∫–∏—Ö —Å–æ–≥—Ä–µ–≤–∞—é—Ç —Å–µ—Ä–¥—Ü–µ, –∞ –º–µ—á—Ç—ã —Å–±—ã–≤–∞—é—Ç—Å—è –æ–¥–Ω–∞ –∑–∞ –¥—Ä—É–≥–æ–π!",
        "–ñ–µ–ª–∞—é —è—Ä–∫–∏—Ö –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–π, –≤–µ—Ä–Ω—ã—Ö –¥—Ä—É–∑–µ–π, –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω—ã—Ö –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–π –∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –∂–µ–ª–∞–Ω–∏–π!",
        "–ü—É—Å—Ç—å –∂–∏–∑–Ω—å –±—É–¥–µ—Ç –Ω–∞–ø–æ–ª–Ω–µ–Ω–∞ —è—Ä–∫–∏–º–∏ –º–æ–º–µ–Ω—Ç–∞–º–∏, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ–º –∏ –ª—é–±–æ–≤—å—é!",
        "–ñ–µ–ª–∞—é –ø—Ä–æ—Ü–≤–µ—Ç–∞–Ω–∏—è, —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ –∑–∞–≤—Ç—Ä–∞—à–Ω–µ–º –¥–Ω–µ –∏ –≥–∞—Ä–º–æ–Ω–∏–∏ –≤–æ –≤—Å–µ–º!",
        "–ü—É—Å—Ç—å —É–¥–∞—á–∞ —Å–æ–ø—É—Ç—Å—Ç–≤—É–µ—Ç –≤–æ –≤—Å–µ—Ö –¥–µ–ª–∞—Ö, –∞ –ª—é–±–æ–≤—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –±–ª–∏–∑–∫–∏—Ö –ª—é–¥–µ–π –ø—Ä–∏–¥–∞—é—Ç —Å–∏–ª!",
        "–ñ–µ–ª–∞—é –∫—Ä–µ–ø–∫–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è, –Ω–µ–∏—Å—Å—è–∫–∞–µ–º–æ–π —ç–Ω–µ—Ä–≥–∏–∏ –∏ –±–æ–¥—Ä–æ—Å—Ç–∏ –¥—É—Ö–∞!",
        "–ü—É—Å—Ç—å –∫–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –¥–µ–Ω—å –ø—Ä–∏–Ω–æ—Å–∏—Ç –Ω–æ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∏ –ø—Ä–∏—è—Ç–Ω—ã–µ —Å—é—Ä–ø—Ä–∏–∑—ã!",
        "–ñ–µ–ª–∞—é —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –±–ª–∞–≥–æ–ø–æ–ª—É—á–∏—è, –∫–∞—Ä—å–µ—Ä–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏!",
        "–ü—É—Å—Ç—å –∂–∏–∑–Ω—å –±—É–¥–µ—Ç –ø–æ—Ö–æ–∂–∞ –Ω–∞ —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ —Å –º–∞—Å—Å–æ–π –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π!",
        "–ñ–µ–ª–∞—é –¥—É—à–µ–≤–Ω–æ–≥–æ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—è, —Å–µ–º–µ–π–Ω–æ–≥–æ —É—é—Ç–∞ –∏ —Ç–µ–ø–ª—ã—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π —Å –±–ª–∏–∑–∫–∏–º–∏!",
        "–ü—É—Å—Ç—å —Å–±—É–¥—É—Ç—Å—è –≤—Å–µ –º–µ—á—Ç—ã, –∞ —Ü–µ–ª–∏ –±—É–¥—É—Ç –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—ã —Å –ª–µ–≥–∫–æ—Å—Ç—å—é!",
        "–ñ–µ–ª–∞—é –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è –¥–ª—è –Ω–æ–≤—ã—Ö —Å–≤–µ—Ä—à–µ–Ω–∏–π –∏ –º—É–¥—Ä–æ—Å—Ç–∏ –≤ –ø—Ä–∏–Ω—è—Ç–∏–∏ —Ä–µ—à–µ–Ω–∏–π!",
        "–ü—É—Å—Ç—å –∫–∞–∂–¥—ã–π –º–æ–º–µ–Ω—Ç –∂–∏–∑–Ω–∏ –±—É–¥–µ—Ç –Ω–∞–ø–æ–ª–Ω–µ–Ω —Å–º—ã—Å–ª–æ–º –∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º–∏ —ç–º–æ—Ü–∏—è–º–∏!"
    ];
    
    const humorous = [
        "–ü—É—Å—Ç—å —Ç–≤–æ–π —Ç–æ—Ä—Ç –±—É–¥–µ—Ç —Ç–∞–∫–∏–º –∂–µ —Å–ª–∞–¥–∫–∏–º, –∫–∞–∫ —Ç—ã!",
        "–ñ–µ–ª–∞—é, —á—Ç–æ–±—ã –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∞—Ä–∫–æ–≤ –ø—Ä–µ–≤—ã—à–∞–ª–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–µ—á–µ–π –Ω–∞ —Ç–æ—Ä—Ç–µ!",
        "–ü—É—Å—Ç—å –≤–æ–∑—Ä–∞—Å—Ç –±—É–¥–µ—Ç –ø—Ä–æ—Å—Ç–æ —á–∏—Å–ª–æ–º, –∞ –Ω–µ –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç–≤–æ–∏—Ö —Å—É—Å—Ç–∞–≤–æ–≤!",
        "–ñ–µ–ª–∞—é, —á—Ç–æ–±—ã —Ç–≤–æ–∏ –¥—Ä—É–∑—å—è –≤—Å–µ–≥–¥–∞ –ø–æ–º–Ω–∏–ª–∏ –æ –¥–Ω–µ —Ä–æ–∂–¥–µ–Ω–∏—è, –Ω–æ –∑–∞–±—ã–≤–∞–ª–∏ –æ –≤–æ–∑—Ä–∞—Å—Ç–µ!",
        "–ü—É—Å—Ç—å —Ç–≤–æ–∏ –≤–æ–ª–æ—Å—ã –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ, –∞ –º–æ—Ä—â–∏–Ω—ã –æ–±—Ö–æ–¥—è—Ç —Å—Ç–æ—Ä–æ–Ω–æ–π!",
        "–ñ–µ–ª–∞—é, —á—Ç–æ–±—ã hangover –±—ã–ª —Ç–æ–ª—å–∫–æ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–¥–∞—Ä–∫–æ–≤!",
        "–ü—É—Å—Ç—å —Ç–≤–æ–∏ —Å–µ–ª—ã–µ –≤–æ–ª–æ—Å—ã –±—É–¥—É—Ç —Ç–æ–ª—å–∫–æ –æ—Ç –±–ª–µ—Å–∫–∞ —Å—á–∞—Å—Ç–ª–∏–≤–æ–π –∂–∏–∑–Ω–∏!",
        "–ñ–µ–ª–∞—é, —á—Ç–æ–±—ã —Ç–≤–æ–∏ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–∞–ª–∏—Å—å —Ç–∞–∫ –∂–µ –±—ã—Å—Ç—Ä–æ, –∫–∞–∫ –∏—Å—á–µ–∑–∞–µ—Ç —Ç–æ—Ä—Ç!",
        "–ü—É—Å—Ç—å —Ç–≤–æ—è –∂–∏–∑–Ω—å –±—É–¥–µ—Ç —Ç–∞–∫–æ–π –∂–µ —è—Ä–∫–æ–π, –∫–∞–∫ —Å–≤–µ—á–∏ –Ω–∞ –ø—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–º —Ç–æ—Ä—Ç–µ!",
        "–ñ–µ–ª–∞—é, —á—Ç–æ–±—ã —Ç–≤–æ–∏ –¥—Ä—É–∑—å—è –≤—Å–µ–≥–¥–∞ –±—ã–ª–∏ –≥–æ—Ç–æ–≤—ã –ø–æ–º–æ—á—å... –¥–æ–µ—Å—Ç—å —Ç–æ—Ä—Ç!"
    ];
    
    const endings = [
        "–° –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è! üéÇ", 
        "–û–±–Ω–∏–º–∞—é –∫—Ä–µ–ø–∫–æ! ü§ó", 
        "–ü—É—Å—Ç—å —ç—Ç–æ—Ç –≥–æ–¥ –±—É–¥–µ—Ç –ª—É—á—à–∏–º –≤ —Ç–≤–æ–µ–π –∂–∏–∑–Ω–∏! üí´", 
        "–¢—ã –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—à—å –≤—Å–µ–≥–æ —Å–∞–º–æ–≥–æ –ª—É—á—à–µ–≥–æ! üåü",
        "–° –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–º! üéâ",
        "–ë—É–¥—å —Å—á–∞—Å—Ç–ª–∏–≤(–∞)! üòä",
        "–õ—é–±–≤–∏ –∏ —Ä–∞–¥–æ—Å—Ç–∏! ‚ù§Ô∏è",
        "–ú–∏—Ä–∞ –∏ –¥–æ–±—Ä–∞! ‚ú®",
        "–í—Å–µ–≥–æ –Ω–∞–∏–ª—É—á—à–µ–≥–æ! üåà",
        "–° —Å–∞–º—ã–º–∏ —Ç–µ–ø–ª—ã–º–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è–º–∏! üå∏",
        "–¢–≤–æ–∏ –¥—Ä—É–∑—å—è üéÅ",
        "–° –Ω–∞–∏–ª—É—á—à–∏–º–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è–º–∏ –≤ —Ç–≤–æ–π –¥–µ–Ω—å! üéà"
    ];
    
    const poetic = [
        "–ö–∞–∫ —Å–≤–µ—á–∏ –Ω–∞ —Ç–æ—Ä—Ç–µ –≥–æ—Ä—è—Ç,\n–¢–∞–∫ –ø—É—Å—Ç—å –∏ –∂–∏–∑–Ω—å —Ç–≤–æ—è —Å–∏—è–µ—Ç,\n–ò –∫–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –¥–µ–Ω—å –ø–æ–¥–∞—Ä—è—Ç\n–£—Å–ø–µ—Ö, —á—Ç–æ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —É–≥–∞—Å–∞–µ—Ç!",
        "–ü—É—Å—Ç—å –≥–æ–¥—ã –º—á–∞—Ç—Å—è, –∫–∞–∫ –º–≥–Ω–æ–≤–µ–Ω—å—è,\n–ù–µ—Å—è —Å —Å–æ–±–æ–π –ª–∏—à—å –Ω–∞—Å–ª–∞–∂–¥–µ–Ω—å–µ,\n–ò –±—É–¥–µ—Ç –∫–∞–∂–¥—ã–π –º–∏–≥ —Å —Ç–æ–±–æ–π\n–ù–∞–ø–æ–ª–Ω–µ–Ω —Ä–∞–¥–æ—Å—Ç—å—é –∏ –¥–æ–±—Ä–æ—Ç–æ–π!",
        "–ö–∞–∫ –ø—Ä–µ–∫—Ä–∞—Å–µ–Ω –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω—å—è,\n–í –Ω–µ–º —É–ª—ã–±–∫–∏, –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω—å—è!\n–ü—É—Å—Ç—å —É–¥–∞—á–∞ —Å—Ç—É—á–∏—Ç—Å—è –≤ –¥–≤–µ—Ä—å,\n–ë—É–¥–µ—Ç —Å—á–∞—Å—Ç–ª–∏–≤–æ–π –∂–∏–∑–Ω—å —Ç–µ–ø–µ—Ä—å!",
        "–í–æ–∑—Ä–∞—Å—Ç - —ç—Ç–æ –Ω–µ –ø—Ä–µ–≥—Ä–∞–¥–∞,\n–ê –ª–∏—à—å –º—É–¥—Ä–æ—Å—Ç–∏ –Ω–∞–≥—Ä–∞–¥–∞,\n–ü—É—Å—Ç—å –¥—É—à–∞ –ø–æ–µ—Ç –æ—Ç —Å—á–∞—Å—Ç—å—è,\n–ò –∏—Å–ø–æ–ª–Ω—è—Ç—Å—è –≤—Å–µ —Å—Ç—Ä–∞—Å—Ç–∏!"
    ];
    
    const childWishes = [
        "–ü—É—Å—Ç—å –∏–≥—Ä—É—à–µ–∫ –±—É–¥–µ—Ç –º–Ω–æ–≥–æ,\n–ò —Å–ª–∞–¥–∫–æ–≥–æ —Ç–æ–∂–µ,\n–ß—Ç–æ–± —Å —É—Ç—Ä–∞ –¥–æ –≤–µ—á–µ—Ä–∞\n–¢—ã –∏–≥—Ä–∞—Ç—å –º–æ–≥(–ª–∞) —Ç–æ–∂–µ!",
        "–ñ–µ–ª–∞—é –º–Ω–æ–≥–æ –∫–æ–Ω—Ñ–µ—Ç,\n–ò–≥—Ä—É—à–µ–∫ –∏ —Å–º–µ—Ö–∞,\n–ü—É—Å—Ç—å –±—É–¥–µ—Ç –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–º\n–≠—Ç–æ—Ç –¥–µ–Ω—å –±–µ–∑ –ø–æ–º–µ—Ö!",
        "–†–∞—Å—Ç–∏ –±–æ–ª—å—à–∏–º(–æ–π) –∏ –∑–¥–æ—Ä–æ–≤—ã–º(–æ–π),\n–°–ª—É—à–∞–π—Å—è –º–∞–º—É —Å –ø–∞–ø–æ–π,\n–ò –±—É–¥—å —Å–∞–º—ã–º —Å—á–∞—Å—Ç–ª–∏–≤—ã–º(–æ–π)\n–ù–∞ –≤—Å–µ–π –Ω–∞—à–µ–π –ø–ª–∞–Ω–µ—Ç–µ!"
    ];
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
    function createConfetti() {
        const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
        
        for (let i = 0; i < 50; i++) {
            const confetti = document.createElement('div');
            confetti.className = 'confetti';
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.top = '-10px';
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.width = (Math.random() * 10 + 5) + 'px';
            confetti.style.height = (Math.random() * 10 + 5) + 'px';
            confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
            document.body.appendChild(confetti);
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –ø–∞–¥–µ–Ω–∏—è
            const animation = confetti.animate([
                { transform: 'translateY(0) rotate(0deg)', opacity: 1 },
                { transform: `translateY(100vh) rotate(${Math.random() * 360}deg)`, opacity: 0 }
            ], {
                duration: Math.random() * 3000 + 2000,
                easing: 'cubic-bezier(0.1, 0.8, 0.1, 1)'
            });
            
            animation.onfinish = () => confetti.remove();
        }
    }
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –∏–∑ –º–∞—Å—Å–∏–≤–∞
    function getRandomElement(array) {
        return array[Math.floor(Math.random() * array.length)];
    }
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è
    function generateCongratulation(name, age, style, addHumor, addWishes) {
        if (!name) name = "–î—Ä—É–≥";
        
        const ageText = age ? `, ${age}-–ª–µ—Ç–∏–µ` : "";
        let beginning = getRandomElement(beginnings);
        let middle = getRandomElement(middles);
        let wish = addWishes ? getRandomElement(wishes) : "";
        let humorousLine = addHumor ? getRandomElement(humorous) : "";
        let ending = getRandomElement(endings);
        
        let congratulation = "";
        
        switch(style) {
            case "funny":
                congratulation = `${beginning} ${name}${ageText}! ${middle} ${humorousLine} ${ending}`;
                break;
            case "heartfelt":
                congratulation = `–î–æ—Ä–æ–≥–æ–π(–∞—è) ${name}, ${middle} –ñ–µ–ª–∞—é —Ç–µ–±–µ —Å–∞–º–æ–≥–æ —Å–≤–µ—Ç–ª–æ–≥–æ, –¥–æ–±—Ä–æ–≥–æ –∏ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–≥–æ. ${wish} ${ending}`;
                break;
            case "official":
                congratulation = `–£–≤–∞–∂–∞–µ–º—ã–π(–∞—è) ${name}! ${middle} ${wish} ${ending}`;
                break;
            case "poetic":
                congratulation = `${getRandomElement(poetic)}\n\n${beginning} ${name}, ${ending}`;
                break;
            case "child":
                congratulation = `–î–æ—Ä–æ–≥–æ–π(–∞—è) ${name}! ${getRandomElement(childWishes)} ${ending}`;
                break;
            default:
                congratulation = `${beginning} ${name}${ageText}! ${middle} ${wish} ${humorousLine} ${ending}`;
        }
        
        return congratulation;
    }
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∏—Å—Ç–æ—Ä–∏—é
    function addToHistory(text, name) {
        if (history.length >= 5) {
            history.pop();
        }
        
        history.unshift({
            text: text,
            name: name,
            date: new Date().toLocaleTimeString()
        });
        
        updateHistoryUI();
    }
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
    function updateHistoryUI() {
        historyList.innerHTML = '';
        
        history.forEach((item, index) => {
            const historyItem = document.createElement('div');
            historyItem.className = 'history-item';
            historyItem.innerHTML = `<strong>${item.name}</strong> (${item.date})`;
            historyItem.title = item.text;
            
            historyItem.addEventListener('click', () => {
                congratulationText.textContent = item.text;
            });
            
            historyList.appendChild(historyItem);
        });
    }
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
    generateBtn.addEventListener('click', function() {
        const name = nameInput.value.trim();
        const age = ageInput.value;
        const style = styleSelect.value;
        const addHumor = addHumorCheckbox.checked;
        const addWishes = addWishesCheckbox.checked;
        
        if (!name) {
            alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è –∏–º–µ–Ω–∏–Ω–Ω–∏–∫–∞');
            return;
        }
        
        const congratulation = generateCongratulation(name, age, style, addHumor, addWishes);
        congratulationText.textContent = congratulation;
        
        addToHistory(congratulation, name);
        createConfetti();
    });
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
    copyBtn.addEventListener('click', function() {
        const text = congratulationText.textContent;
        
        navigator.clipboard.writeText(text).then(() => {
            copyBtn.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
            setTimeout(() => {
                copyBtn.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ';
            }, 2000);
        }).catch(err => {
            console.error('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è: ', err);
        });
    });
});